{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://portal-kit.local/schemas/web-app-profile.schema.json",
  "title": "WebAppProfile",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "id",
    "name",
    "startUrl",
    "allowedOrigins",
    "isolation",
    "externalLinks",
    "createdAt",
    "updatedAt"
  ],
  "properties": {
    "id": {
      "type": "string",
      "minLength": 1
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 128
    },
    "startUrl": {
      "type": "string",
      "format": "uri"
    },
    "allowedOrigins": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "minLength": 1
      }
    },
    "icon": {
      "type": "object",
      "additionalProperties": false,
      "required": ["type", "value"],
      "properties": {
        "type": { "type": "string", "enum": ["builtin", "file"] },
        "value": { "type": "string", "minLength": 1 }
      }
    },
    "group": {
      "type": "string",
      "minLength": 1,
      "maxLength": 64
    },
    "window": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "defaultWidth": { "type": "number", "minimum": 200, "maximum": 10000 },
        "defaultHeight": { "type": "number", "minimum": 200, "maximum": 10000 }
      }
    },
    "isolation": {
      "type": "object",
      "additionalProperties": false,
      "required": ["partition"],
      "properties": {
        "partition": { "type": "string", "minLength": 1 }
      }
    },
    "externalLinks": {
      "type": "object",
      "additionalProperties": false,
      "required": ["policy"],
      "properties": {
        "policy": { "type": "string", "enum": ["open-in-popup", "open-in-system", "block", "ask"] }
      }
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time"
    }
  }
}
